---
import BaseLayout from '@/layouts/BaseLayout.astro';
import { getLatestComic } from '@/lib/sanity';

const comic = await getLatestComic();
---

<BaseLayout title="Latest Comic">
  {
    comic ? (
      <article>
        <h1>{comic.title}</h1>
        <p class="comic-meta">
          Published: {new Date(comic.publishedAt).toLocaleDateString()}
        </p>
        <img
          src={comic.imageUrl}
          alt={comic.altText || comic.title}
          class="comic-image"
        />
        {comic.transcript && (
          <details style="margin-top: 1rem;">
            <summary>Transcript</summary>
            <pre style="white-space: pre-wrap; background: #f5f5f5; padding: 1rem; margin-top: 0.5rem; border-radius: 4px;">
              {comic.transcript}
            </pre>
          </details>
        )}
      </article>
    ) : (
      <p>No comics yet. Use the admin panel to upload your first comic!</p>
    )
  }
</BaseLayout>
